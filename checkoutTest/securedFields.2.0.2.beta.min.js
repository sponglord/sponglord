!function(e){var o={};function n(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=o,n.d=function(e,o,t){n.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,o){if(1&o&&(e=n(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var i in e)n.d(t,i,function(o){return e[o]}.bind(null,i));return t},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},n.p="",n(n.s=3)}([function(e,o,n){"use strict";n.r(o);var t={cardBrand:"",eventSource:null,eventOrigin:null,fieldType:null,txVariant:null,hasFocus:!1,storedEncryptedMonthObj:null,numKey:-1,fieldHasError:!1,hasValidNumberField:!1,numFieldInErrorState:!1,hideCVC:!1,shiftPressed:!1},i=function(e){return Number(e)===t.numKey||(window.console&&window.console.error&&window.console.error("ERROR: securedFields:: postMessage special data is incorrect: type 5"),!1)},r=t,l={nonConsolidatedCard:"",recurringCardIndicator:"_r",cardGroupTypes:[],inputEl:null,dfValue:null},a=function(e,o){if(e.hasOwnProperty("action")&&""===e.action)window.__logVal2&&window.console&&window.console.log&&window.console.log("### messageSender::sendPostMessage:: ACTION NOT SET");else{e.fieldType=o,e.numKey=r.numKey;var n=JSON.stringify(e);r.eventSource.postMessage(n,r.eventOrigin)}},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.prototype.toString;function d(e){return"object"===(void 0===e?"undefined":s(e))&&null!==e&&"[object Array]"===Object.prototype.toString.call(e)}window.console&&window.console.error&&window.console.error.bind(window.console),window.console&&window.console.info&&window.console.info.bind(window.console);var c=window.console&&window.console.log&&window.console.log.bind(window.console),u=window.console&&window.console.warn&&window.console.warn.bind(window.console),p=function(e,o){if(e)return e.querySelector(o)},w=function(e,o){return!(!e||!e.className)&&function(e,o){if(void 0===e)return!1;if("string"==typeof e)return e.indexOf(o)>-1;if(d(e))for(var n=e.length;n-- >0;)if(e[n]===o)return!0;return e.hasOwnProperty&&e.hasOwnProperty(o)}(e.className.split(/\s+/),o)},f=function(e,o,n){var t={enableValidations:!0};return t.randomBytes=o||null,t.stopDeviceFingerprint=n,e.cse=e.cse||adyen.createEncryption(t)},g=function(e,o,n,t){var i={},r={},l=e.getAttribute("data-encrypted-name");if(!l||""===l)return i.error='"data-encrypted-name" attribute not set on node',i;r[l]=e.value;var a=e.cse;a||u("No Encryption object exists for this html node. Encryption will not be possible. node=",e);var s=a.validate(r);r.generationtime=n;try{var d=a.encrypt(r,t);"false"===d||!1===d?(window._b$dl&&window.console&&window.console.log&&window.console.log("### DOM::_getEncryptedFormData:: CSE FAILED!!!!: validationResult=",s),s.hasOwnProperty("luhn")?i.luhn=!1:s.hasOwnProperty("cvc")?i.cvc=!1:s.hasOwnProperty("year")&&(i.date=!1),i.encryptionSuccess=!1):(window._b$dl&&window.console&&window.console.log&&window.console.log("### DOM::_getEncryptedFormData:: encryptionSuccess!!!!"),i.encryptionSuccess=!0,i[o]=d)}catch(e){window._b$dl&&window.console&&window.console.log&&window.console.log("### DOM::_getEncryptedFormData:: Encryption error:",e);var c=String(e);c&&c.toLowerCase().indexOf("not ready")>-1&&c.toLowerCase().indexOf("seeded")>-1&&window.console&&window.console.warn&&window.console.warn("### DOM::_getEncryptedData:: IE error!!!!! Not enough entropy generated to allow encryption process")}return i},_=function(e,o,n,t){if("function"==typeof e.addEventListener)e.addEventListener(o,n,t);else{if(!e.attachEvent)throw new Error(": Unable to bind "+o+"-event");e.attachEvent("on"+o,n)}},h=/(android)/i.test(navigator.userAgent),y=function(){var e=navigator.userAgent,o=e.indexOf("MSIE ");if(o>0)return parseInt(e.substring(o+5,e.indexOf(".",o)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var t=e.indexOf("Edge/");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);return!1}(),v=/iphone|ipod|ipad/i.test(navigator.userAgent),m=/(firefox)/i.test(navigator.userAgent);window._b$dl&&window.console&&window.console.log&&(window.console.log("### userAgent:::: isAndroid=",h),window.console.log("### userAgent:::: isIE=",y),window.console.log("### userAgent:::: __IS_IOS=",v),window.console.log("### userAgent:::: __IS_FIREFOX=",m));var C=h,b=y,O=v,E=m,T=function(e,o){var n=o;if(n&&-1===e.className.indexOf("js-chckt-input-field-error")&&(e.className+=" chckt-input-field--error",e.className+=" js-chckt-input-field-error"),!n){var t=void 0;e.className.indexOf("js-chckt-input-field-error")>-1&&(t=e.className.replace("chckt-input-field--error",""),e.className=t.trim(),t=e.className.replace("js-chckt-input-field-error",""),e.className=t.trim())}},S=function(e,o){var n=o;if(n&&-1===e.className.indexOf("js-chckt-input-field-validated")&&(e.className+=" chckt-input-field--validated",e.className+=" js-chckt-input-field-validated"),!n){var t=void 0;e.className.indexOf("js-chckt-input-field-validated")>-1&&(t=e.className.replace("chckt-input-field--validated",""),e.className=t.trim(),t=e.className.replace("js-chckt-input-field-validated",""),e.className=t.trim())}},D={__HOSTED_NUMBER_FIELD_STR:"encryptedCardNumber",__HOSTED_DATE_FIELD_STR:"encryptedExpiryDate",__HOSTED_MONTH_FIELD_STR:"encryptedExpiryMonth",__HOSTED_YEAR_FIELD_STR:"encryptedExpiryYear",__HOSTED_CVC_FIELD_STR:"encryptedSecurityCode",__EXPIRY_MONTH_STR:"expiryMonth",__EXPIRY_YEAR_STR:"expiryYear"},R=function(e,o){switch(o){case"key":case"code":return"Backspace"===e||"Delete"===e?"delete":"ArrowLeft"===e?"leftarrow":"ArrowRight"===e?"rightarrow":" "===e||"Space"===e?"space":"Shift"===e||"ShiftRight"===e||"ShiftLeft"===e?"shift":"Tab"===e?"tab":"Unidentified"===e?"androidkeystroke":e;case"keyCode":case"which":return 8===e||46===e?"delete":37===e?"leftarrow":39===e?"rightarrow":32===e?"space":16===e?"shift":9===e?"tab":229===e?"androidkeystroke":String.fromCharCode(e);default:return e}},I=function(e){return window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationUtils::handleKeyPress::(line:20):: e=",e),void 0!==e.key?R(e.key,"key"):void 0!==e.code&&""!==e.code?R(e.code,"code"):e.keyCode>=0?R(e.keyCode,"keyCode"):void 0!==e.which&&R(e.which,"which")},N=function(e,o){var n=!0===o?"selectionEnd":"selectionStart";return n in e?e[n]:0},k=function(e,o,n){var t=n||o;e.setSelectionRange&&(e.focus(),e.setSelectionRange(o,t))},V="delete",j=void 0,L={__NO_BRAND:"noBrand",cards:[]};L.cards.push({cardType:"mc",startingRules:[51,52,53,54,55,22,23,24,25,26,27],permittedLengths:[16],pattern:/^(5[1-5][0-9]{0,14}|2[2-7][0-9]{0,14})$/,securityCode:"CVC"});L.cards.push({cardType:"visadankort",startingRules:[4571],permittedLengths:[16],pattern:/^(4571)[0-9]{0,12}$/});L.cards.push({cardType:"visa",startingRules:[4],permittedLengths:[13,16,19],pattern:/^4[0-9]{0,18}$/,securityCode:"CVV"});L.cards.push({cardType:"amex",startingRules:[34,37],permittedLengths:[15],pattern:/^3[47][0-9]{0,13}$/,securityCode:"CID"});L.cards.push({cardType:"vias",startingRules:[9],permittedLengths:[16]});L.cards.push({cardType:"diners",startingRules:[36],permittedLengths:[14],pattern:/^(36)[0-9]{0,12}$/});L.cards.push({cardType:"maestrouk",startingRules:[6759],permittedLengths:[16,18,19],pattern:/^(6759)[0-9]{0,15}$/});L.cards.push({cardType:"solo",startingRules:[6767],permittedLengths:[16,18,19],pattern:/^(6767)[0-9]{0,15}$/});L.cards.push({cardType:"laser",startingRules:[6304,6706,677117,677120],permittedLengths:[16,17,18,19],pattern:/^(6304|6706|6709|6771)[0-9]{12,15}$/,cvcRequired:!1});L.cards.push({cardType:"discover",startingRules:[6011,644,645,646,647,648,649,65],permittedLengths:[16],pattern:/^(6011[0-9]{0,12}|(644|645|646|647|648|649)[0-9]{0,13}|65[0-9]{0,14})$/});L.cards.push({cardType:"jcb",startingRules:[3528,3529,353,354,355,356,357,358],permittedLengths:[16,19],pattern:/^(352[8,9]{1}[0-9]{0,15}|35[4-8]{1}[0-9]{0,16})$/,securityCode:"CAV"});L.cards.push({cardType:"bcmc",startingRules:[6703,479658,606005],permittedLengths:[16,17,18,19],pattern:/^((6703)[0-9]{0,15}|(479658|606005)[0-9]{0,13})$/,cvcRequired:!1,hideCVC:!0});L.cards.push({cardType:"bijcard",startingRules:[5100081],permittedLengths:[16],pattern:/^(5100081)[0-9]{0,9}$/});L.cards.push({cardType:"dankort",startingRules:[5019],permittedLengths:[16],pattern:/^(5019)[0-9]{0,12}$/});L.cards.push({cardType:"hipercard",startingRules:[606282],permittedLengths:[16],pattern:/^(606282)[0-9]{0,10}$/});L.cards.push({cardType:"maestro",startingRules:[50,56,57,58,6],permittedLengths:[16,17,18,19],pattern:/^(5[0|6-8][0-9]{0,17}|6[0-9]{0,18})$/,cvcRequired:!1});L.cards.push({cardType:"elo",startingRules:[506699,50670,50671,50672,50673,50674,50675,50676,506770,506771,506772,506773,506774,506775,506776,506777,506778,401178,438935,451416,457631,457632,504175,627780,636297,636368,651653,506728,509096,509083,509082,655001,650487,509081,509074,509066,431274,438935,457631,457632,506744,506747,506748,506753,509069,650906,506730,509067,655003,509068],permittedLengths:[16],pattern:/^((((506699)|(506770)|(506771)|(506772)|(506773)|(506774)|(506775)|(506776)|(506777)|(506778)|(401178)|(438935)|(451416)|(457631)|(457632)|(504175)|(627780)|(636368)|(636297))[0-9]{0,10})|((50676)|(50675)|(50674)|(50673)|(50672)|(50671)|(50670))[0-9]{0,11})$/});L.cards.push({cardType:"uatp",startingRules:[1],permittedLengths:[15],pattern:/^1[0-9]{0,14}$/,cvcRequired:!1});L.cards.push({cardType:"cup",startingRules:[62],permittedLengths:[14,15,16,17,18,19],pattern:/^(62)[0-9]{0,17}$/});L.cards.push({cardType:"cartebancaire",startingRules:[4,5,6],permittedLengths:[16],pattern:/^[4-6][0-9]{0,15}$/});L.cards.push({cardType:"visaalphabankbonus",startingRules:[450903],permittedLengths:[16],pattern:/^(450903)[0-9]{0,10}$/});L.cards.push({cardType:"mcalphabankbonus",startingRules:[510099],permittedLengths:[16],pattern:/^(510099)[0-9]{0,10}$/});L.cards.push({cardType:"hiper",startingRules:[637095,637599,637609,637612],permittedLengths:[16],pattern:/^(637095|637599|637609|637612)[0-9]{0,10}$/});L.cards.push({cardType:"oasis",startingRules:[982616],permittedLengths:[16],pattern:/^(982616)[0-9]{0,10}$/,cvcRequired:!1});L.cards.push({cardType:"karenmillen",startingRules:[98261465],permittedLengths:[16],pattern:/^(98261465)[0-9]{0,8}$/,cvcRequired:!1});L.cards.push({cardType:"warehouse",startingRules:[982633],permittedLengths:[16],pattern:/^(982633)[0-9]{0,10}$/,cvcRequired:!1});L.cards.push({cardType:"mir",startingRules:[220],permittedLengths:[16,17,18,19],pattern:/^(220)[0-9]{0,16}$/});L.cards.push({cardType:"codensa",startingRules:[590712],permittedLengths:[16],pattern:/^(590712)[0-9]{0,10}$/});L.cards.push({cardType:"naranja",startingRules:[377798,377799,402917,402918,527571,527572,589562],permittedLengths:[16,17,18,19],pattern:/^(37|40|5[28])([279])\d*$/});L.cards.push({cardType:"cabal",startingRules:[589657,600691,603522,6042,6043,636908],permittedLengths:[16,17,18,19],pattern:/^(58|6[03])([03469])\d*$/});L.cards.push({cardType:"shopping",startingRules:[2799,589407,603488],permittedLengths:[16,17,18,19],pattern:/^(27|58|60)([39])\d*$/});L.cards.push({cardType:"argencard",startingRules:[501105],permittedLengths:[16,17,18,19],pattern:/^(50)(1)\d*$/});L.cards.push({cardType:"troy",startingRules:[9792],permittedLengths:[16],pattern:/^(97)(9)\d*$/});var F={detectCard:function(e,o){var n=void 0,t=void 0,i=void 0;if(o){if((n=L.cards.filter(function(e){return o.includes(e.cardType)}).filter(function(o){return o.hasOwnProperty("pattern")&&e.match(o.pattern)})).length){if(1===n.length)return n[0];for(t=0,i=n.length;t<i;t++)if(!n[t].longestRule){var r=n[t].startingRules.reduce(function(e,o){return e>o?e:o});n[t].longestRule=String(r).length}return n.reduce(function(e,o){return e.longestRule>=o.longestRule?e:o})}return{cardType:L.__NO_BRAND}}return{cardType:L.__NO_BRAND}},detectCardLength:function(e,o){var n=void 0,t=void 0,i=0,r=!1,l=e.cardType!==L.__NO_BRAND?e.permittedLengths[e.permittedLengths.length-1]:0;if(l&&o>l&&(i=o.length-l)>0&&(t=o=o.substring(0,o.length-i)),e.permittedLengths.forEach(function(e){o.length===e&&(r=!0)}),o.length===l){var a=Math.floor(o.length/4);n=l+(o.length%4>0?a:a-1),"amex"===e.cardType.toLowerCase()&&(n=l+2)}return{shortenedNewValue:t,maxLength:n,reachedValidLength:r}},getShortestPermittedCardLength:function(){if(!j){var e=[];L.cards.forEach(function(o){e=e.concat(o.permittedLengths)}),j=Math.min.apply(null,e)}return j},getCardByBrand:function(e){return L.cards.filter(function(o){return o.cardType===e})[0]},__NO_BRAND:L.__NO_BRAND},P={},M=function(e){var o=e;if(isNaN(parseInt(o,10)))return!1;var n=o.length,t=1&n,i=0;if(void 0===P[o]){for(var r=0;r<n;r++){var l=parseInt(o.charAt(r),10);1&r^t||(l*=2)>9&&(l-=9),i+=l}P[o]=i%10==0}for(var a in P)P.hasOwnProperty(a)&&a.length;return P[o]},B=function(e,o){var n=o||"some";return 1===e.length&&"number"==typeof parseInt(e)?n+"KeyPressed":e},A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x=!1,H=!1,Y="",$=!1,U=void 0,G=void 0,K=0,q="",X=function(e,o,n){if("string"===(void 0===U?"undefined":A(U)).toLowerCase()||U){x=!1;var t=o.value,i=oe(t),r=void 0,a=!1,s=!1;K=void 0;var d=n||[],c={};window.__logVal2&&window.console&&window.console.log&&(window.console.log("\n### validationsCCNumber::inputCC:: currentVal=",t),window.console.log("### validationsCCNumber::inputCC:: currentValueStripped=",i),window.console.log("### validationsCCNumber::inputCC:: Config.nonConsolidatedCard=",l.nonConsolidatedCard),window.console.log("### validationsCCNumber::inputCC:: cardGroupTypes=",d)),H&&i===oe(U)&&(s=!0);var u=void 0,p=void 0;if(""!==l.nonConsolidatedCard?(u=F.getCardByBrand(l.nonConsolidatedCard),p=F.detectCard(i.substr(0,7),d),window.__logVal2&&window.console&&window.console.log&&(window.console.log("### validationsCCNumber::inputCC:: SINGLE BRAND cardType=",u.cardType),window.console.log("### validationsCCNumber::inputCC:: SINGLE BRAND potentialCard=",p.cardType)),i.length>7&&p.cardType!==u.cardType&&(c=J(!0,o,"Typed card number doesn't match card type",c),u={cardType:F.__NO_BRAND},window.console&&window.console.log&&window.console.log("### validationsCCNumber::inputCC:: 8 DIGITS WRONG CARD NUM FOR SINGLE BRAND commObj=",c))):(u=F.detectCard(i.substr(0,7),d),window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCNumber::inputCC:: DETECTING CARD BASED ON=",i.substr(0,7))),$="amex"===u.cardType.toLowerCase(),window.__logVal2&&window.console&&window.console.log&&(window.console.log("### validationsCCNumber::inputCC:: card2.cardType=",u.cardType),window.console.log("### validationsCCNumber::inputCC:: __isAmex=",$)),r=ee(i),window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCNumber::inputCC:: newValue (masked)=",r," length=",r.length),K=G-ne(G)+ne(G+(r.length-U.length))+(oe(r).length-oe(U).length),window.__logVal2&&window.console&&window.console.log&&window.console.log("\n### validationsCCNumber::inputCC:: __newCursorPosition=",K),o.maxLength=24,u.cardType!==F.__NO_BRAND){var w=F.detectCardLength(u,i);r=w.shortenedNewValue?ee(w.shortenedNewValue):r,o.maxLength=w.maxLength||o.maxLength,a=w.reachedValidLength,c=J(!1,o,"",c);var f=!(!1===u.cvcRequired);c=Q(u.cardType,o,n,f,u.hideCVC||!1,c),c=Z(u.cardType,o,n,u.securityCode,c)}else""===l.nonConsolidatedCard?(c=W(o,d,c),c=J(!1,o,"",c),i.length>=F.getShortestPermittedCardLength()&&(a=!0)):window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCNumber::inputCC:: SINGLE BRAND - number doesn't match card type");a&&(x=!0,window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCNumber::inputCC:: __isValidCardNumber=",x)),""!==r?(H&&K===r.length&&" "===te(r)&&(window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCNumber::inputCC:: del/ends in sep/cursor at end"),r=ie(r)),a&&" "===te(r)&&(r=ie(r)),window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCNumber::inputCC:: (OUTCOME 1) set new value=",r),o.value=r):(window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCNumber::inputCC:: (OUTCOME 2) clear field"),o.value="",c=J(!1,o,"",c),(c=W(o,d,c)).action=Y),s&&(window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCNumber::inputCC:: DELETED A SPACE - adjust cursor pos"),K-=1),K<0&&(K=0,window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCNumber::inputCC:: __newCursorPosition < 0, correcting to=",K)),(K||H&&0===K)&&(window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCNumber::inputCC:: SETTING CURSOR POS =",K),k(o,K)),c.action=B(Y,"number");var g=oe(r).substr(0,6);return q!==g&&(c.binValue=g,q=g),window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCNumber::inputCC:: RETURNING COMM OBJ = ",c),c}},z=function(e,o){var n=oe(e.value),t=F.detectCard(n,o);window.__logVal2&&window.console&&window.console.log&&window.console.log("@@@ validationsCCNumber::isValidLength:: card.cardType=",t.cardType);var i=!1;return t.cardType!==F.__NO_BRAND?t.permittedLengths.forEach(function(e){n.length===e&&(i=!0)}):n.length>=F.getShortestPermittedCardLength()&&(i=!0),i},J=function(e,o,n,t){var i=Object.assign({},t);return i.error=n,i},W=function(e,o,n){var t=Object.assign({},n);return t=Q(null,e,o,!0,!1,t),t=Z(null,e,o,null,t)},Q=function(e,o,n,t,i,r){var l=Object.assign({},r);if(!n)return l;if(1===n.length)return l.brand=e,l;var a="card@2x.png";return null!==e&&(a=e+"@2x.png"),l.brand=e||"card",l.imageSrc=a,l.cvcRequired=t,l.hideCVC=i,l},Z=function(e,o,n,t,i){var r=Object.assign({},i);return n&&1!==n.length?(r.maxLength=3,r.cvcText=t||"Security_code","amex"===e&&(r.maxLength=4),r):r},ee=function(e){window.__logVal2&&window.console&&window.console.log&&(window.console.log("\n### validationsCCNumber::mask:: value=",e),window.console.log("### validationsCCNumber::mask:: __isAmex=",$));var o=e.replace(/(\d{4})/g,"$1 ");return $&&(e.length>=8&&(o=e.replace(/(\d{4})/,"$1 ")),e.length>=10&&(o=e.replace(/(\d{4})(\d{6})/g,"$1 $2 "))),o},oe=function(e){return e.replace(/[^\d]/g,"")},ne=function(e){var o=0;return $?(e>=5&&(o=1),e>=12&&(o=2)):o=Math.floor(e/5),window.__logVal2&&window.console&&window.console.log&&(window.console.log("\n### validationsCCNumber::checkSeparator:: position=",e),window.console.log("### validationsCCNumber::checkSeparator:: __isAmex=",$),window.console.log("### validationsCCNumber::checkSeparator:: numSeps=",o)),o},te=function(e){return e.charAt(e.length-1)},ie=function(e){return e.substr(0,e.length-1)},re=function(e,o){U=o.value,G=N(o,!0);var n=I(e);H=n===V,Y=n,window.__logVal2&&window.console&&window.console.log&&(window.console.log("\n--------------------"),window.console.log("### validationsCCNumber::keyDownCCNumber:: __oldValue=",U),window.console.log("### validationsCCNumber::keyDownCCNumber:: __oldValue.length=",U.length),window.console.log("### validationsCCNumber::keyDownCCNumber:: __oldCursor=",G),window.console.log("### validationsCCNumber::keyDownCCNumber:: __deleteKeyPressed=",H))},le=X,ae=function(e,o,n){return H&&b&&9===b?X(0,o,n):null},se=function(e,o){K===o.value.length&&(window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCNumber::keyUpCCNumber:: setting cursor pos =",K),k(o,K))},de=function(e,o){var n=void 0,t=oe(e.value);if(z(e,o)){window._b$dl&&window.console&&window.console.log&&window.console.log("\n@@@ validationsCCNumber::doLuhnCheck:: PERFORMING LUHN CHECK");var i=M(t);n={action:"luhnCheck",error:i?"":"luhn check failed",valid:i}}return n},ce=function(){return x},ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe=!1,we="",fe=!1,ge=void 0,_e=void 0,he=0,ye=0,ve=!1,me=function(e){var o=new Date(e);if(isNaN(o)){window.__logVal2&&window.console&&window.console.log&&window.console.log("###FLAG!!! validationsCCDate::getCurrentDate:: IE8 currentDate is NaN");var n=genTime.substring(0,genTime.length-1),t=n.split("T");n=t[0].split("-");var i=t[1].split(":");o=new Date(n[0],n[1]-1,n[2],i[0],i[1],i[2])}return o},Ce=function(e,o,n,t){var i=Object.assign({},t);return i.error=n,i},be=function(e,o,n){var t=e.parentNode.getElementsByTagName("input");[].forEach.call(t,function(e){"expiryMonth"===e.getAttribute("data-encrypted-name")&&(e.value=o),"expiryYear"===e.getAttribute("data-encrypted-name")&&void 0!==n&&(e.value=n)})},Oe=function(e){var o=e.substr(0,2),n=e.substr(2,4);return window.__logVal2&&window.console&&window.console.log&&(window.console.log("### validationsCCDate::mask:: monthVal=",o),window.console.log("### validationsCCDate::mask:: yearVal=",n)),o.length?o+"/"+n:""},Ee=function(e){var o=e.split("/"),n=[];if(o.forEach(function(e){if(""!==e){var o=e.replace(/[^\d]/g,"");n.push(o)}}),2===n.length&&1===n[0].length){var t=n[1].substr(0,1);n[0]=n[0]+t,n[1]=n[1].substr(1),window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCDate::unmask:: M & Y but M is single digit"),ye=2}return n},Te=function(e){var o=Math.floor(e/3);return window.__logVal2&&window.console&&window.console.log&&window.console.log("\n### validationsCCDate::checkSeparator:: num of Seps=",o),o},Se=function(e){return e.charAt(e.length-1)},De=function(e,o){var n=o||1;return e.substr(0,e.length-n)},Re=function(e){return _e-Te(_e)+Te(_e+(e.length-ge.length))+(Ee(e).join("").length-Ee(ge).join("").length)},Ie=function(e,o){ge=o.value,_e=N(o,!0);var n=I(e);pe=n===V,we=n,window.__logVal2&&window.console&&window.console.log&&window.console.log("\n### validationsCCDate::keyDownDate:: keyPressed=",n)},Ne=function(e,o){if("string"===(void 0===ge?"undefined":ue(ge)).toLowerCase()||ge){var n=o.value,t=Ee(n),i=void 0;he=void 0,fe=!1,ve=!1,1===ge.length&&"/"===Se(n)&&(ve=!0);var r={},l=me(genTime);window.__logVal2&&window.console&&window.console.log&&(window.console.log("\n### validationsCCDate::inputDate:: __oldValue=",ge),window.console.log("### validationsCCDate::inputDate:: currentVal=",n),window.console.log("### validationsCCDate::inputDate:: __isValidExpiryDate=",fe),window.console.log("### validationsCCDate::inputDate:: currentValueArr=",t));var a,s=void 0,d=void 0,c=void 0,u=void 0;if(s=t[0]||"",d=t[1]||"",s.length>2&&(window.__logVal2&&window.console&&window.console.log&&window.console.log("###FLAG!!! validationsCCDate::inputDate:: typedMonth.length > 2"),d=(d=s.substr(2)+d).substr(0,2),s=s.substr(0,2),window.__logVal2&&window.console&&window.console.log&&(window.console.log("### validationsCCDate::inputDate:: typedMonth.length > 2 new typedMonth=",s),window.console.log("### validationsCCDate::inputDate:: typedMonth.length > 2 new typedYear=",d))),a=Number(s),1===s.length&&(window.__logVal2&&window.console&&window.console.log&&(window.console.log("### FLAG!!! validationsCCDate::inputDate:: typedMonth.length === 1"),window.console.log("### validationsCCDate::inputDate:: dateNum=",a)),(a>=2&&a<=9||ve)&&(s="0"+a,window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCDate::inputDate:: ypedMonth.length === 1 new typedMonth=",s))),2===s.length&&(window.__logVal2&&window.console&&window.console.log&&window.console.log("###FLAG!!! validationsCCDate::inputDate:: typedMonth.length === 2"),0===a&&(s="01"),a>12&&(window.__logVal2&&window.console&&window.console.log&&window.console.log("###FLAG!!! validationsCCDate::inputDate:: dateNum > 12"),d=(d=s.substr(1)+d).substr(0,2),s="0"+s.substr(0,1),window.__logVal2&&window.console&&window.console.log&&(window.console.log("### validationsCCDate::inputDate:: dateNum > 12 adj typedMonth=",s),window.console.log("### validationsCCDate::inputDate:: dateNum > 12 adj typedYear=",d)))),window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCDate::inputDate:: typedYear=",d),d&&2===d.length){var p=l.getFullYear();u=Number("20"+d),c=Number(s);var w=new Date(u,c-1),f=l.setMonth(l.getMonth()-3);if(w.getTime()<f)return window.__logVal2&&window.console&&window.console.log&&(window.console.log("### validationsCCDate::inputDate:: CARD TOO OLD!!"),window.console.log("### validationsCCDate::inputDate:: CARD TOO OLD typedMonth=",s),window.console.log("### validationsCCDate::inputDate:: CARD TOO OLD typedYear=",d)),i=Oe(s+d),o.value=i,(r=Ce(!0,o,"validateExpiryDate: card too old",r)).action=B(we,"date"),r;if(window.__logVal2&&window.console&&window.console.log&&(window.console.log("### validationsCCDate::inputDate:: currentYear=",p),window.console.log("### validationsCCDate::inputDate:: yearNum=",u)),u>p+15)return i=Oe(s+d),o.value=i,(r=Ce(!0,o,"validateExpiryDate: expiryDate too far in future",r)).action=B(we,"date"),r}i=Oe(s+d),window.__logVal2&&window.console&&window.console.log&&window.console.log("\n### validationsCCDate::inputDate:: newValue (masked)=",i," length=",i.length),2===i.length&&"/"===Se(i)&&(i=De(i,1),window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCDate::inputDate:: newValue was single month digit so recalc newValue=",i)),he=Re(i),window.__logVal2&&window.console&&window.console.log&&(window.console.log("\n### validationsCCDate::inputDate:: __newCursorPosition=",he),window.console.log("### validationsCCDate::inputDate:: currentVal.length=",n.length)),""!==i&&(pe&&N(o)===n.length&&(window.__logVal2&&window.console&&window.console.log&&(window.console.log("### validationsCCNumber2::inputDate:: deleting from end"),window.console.log("### validationsCCNumber2::inputDate:: fieldUtils.getCaretPos(pNode)=",N(o))),2===N(o)&&(window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCDate::inputDate:: just deleted separator"),i=De(i,2),he=Re(i),window.__logVal2&&window.console&&window.console.log&&window.console.log("\n### validationsCCDate::inputDate:: __newCursorPosition recalc=",he))),window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCDate::inputDate:: set new value=",i)),r=Ce(!1,o,"",r),o.value=i,ye&&(k(o,he=ye),ye=0,window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCDate::inputDate:: Setting cursor pos")),5===i.length&&(fe=!0);var g=(t=Ee(i))[0]&&2===t[0].length?t[0]:"",_=t[1]&&2===t[1].length?"20"+t[1]:"";return be(o,g,_),window.__logVal2&&window.console&&window.console.log&&(window.console.log("### validationsCCDate::inputDate:: __setHiddenDateFields month=",g),window.console.log("### validationsCCDate::inputDate:: __setHiddenDateFields year=",_)),pe=!1,r.action=B(we,"date"),r}},ke=function(e,o){return pe&&b&&9===b?ccDate.inputDate(e,o):null},Ve=function(e,o){he===o.value.length&&(window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCDate::keyUpDateAndroid:: setting cursor pos =",he),k(o,he))},je=function(){return fe},Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe=!1,Pe="",Me=!1,Be=void 0,Ae=function(e,o,n,t){var i=Object.assign({},t);return i.error=n,i},xe=function(e){return e.replace(/[^\d]/g,"")},He=function(e,o){Be=o.value;var n=I(e);Fe=n===V,Pe=n,window.__logVal2&&window.console&&window.console.log&&window.console.log("\n### validationsCCMonth::keyDownMonth:: keyPressed=",n)},Ye=function(e,o){if("string"===(void 0===Be?"undefined":Le(Be)).toLowerCase()||Be){var n,t=o.value,i=xe(t);Me=!1;var r={};window.__logVal2&&window.console&&window.console.log&&(window.console.log("\n### validationsCCMonth::inputMonth:: __oldValue=",Be),window.console.log("### validationsCCMonth::inputMonth:: currentVal=",t),window.console.log("### validationsCCMonth::inputMonth:: __isValidExpiryMonth=",Me),window.console.log("### validationsCCMonth::inputMonth:: currentValueStripped=",i));var l=i,a=Number(l);return 1===l.length&&(window.__logVal2&&window.console&&window.console.log&&(window.console.log("### FLAG!!! validationsCCMonth::inputMonth:: typedMonth.length === 1"),window.console.log("### validationsCCMonth::inputMonth:: dateNum=",a)),a>=2&&a<=9&&(l="0"+a,window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCMonth::inputMonth:: ypedMonth.length === 1 new typedMonth=",l))),2===l.length&&(window.__logVal2&&window.console&&window.console.log&&window.console.log("###FLAG!!! validationsCCMonth::inputMonth:: typedMonth.length === 2"),0===a&&(l="01"),a>12&&(window.__logVal2&&window.console&&window.console.log&&window.console.log("###FLAG!!! validationsCCMonth::inputMonth:: dateNum > 12"),l="0"+l.substr(0,1),window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCMonth::inputMonth:: dateNum > 12 adj typedMonth=",l))),n=l,window.__logVal2&&window.console&&window.console.log&&window.console.log("\n### validationsCCMonth::inputCC:: newValue (masked)=",n," length=",n.length),r=Ae(!1,o,"",r),o.value=n,2===n.length&&(Me=!0),r.action=B(Pe,"month"),r}},$e=function(e,o){return Fe&&b&&9===b?ccDate.inputMonth(e,o):null},Ue=function(){return Me},Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke=!1,qe="",Xe=!1,ze=void 0,Je=function(e){var o=new Date(e);if(isNaN(o)){window.__logVal2&&window.console&&window.console.log&&window.console.log("###FLAG!!! validationsCCYear::getCurrentDate:: IE8 currentDate is NaN");var n=genTime.substring(0,genTime.length-1),t=n.split("T");n=t[0].split("-");var i=t[1].split(":");o=new Date(n[0],n[1]-1,n[2],i[0],i[1],i[2])}return o},We=function(e,o,n,t){var i=Object.assign({},t);return i.error=n,i},Qe=function(e,o){var n=document.getElementById("expiryYear");void 0!==o&&(n.value=o)},Ze=function(e){return e.replace(/[^\d]/g,"")},eo=function(e,o){ze=o.value;var n=I(e);Ke=n===V,qe=n,window.__logVal2&&window.console&&window.console.log&&window.console.log("\n### validationsCCYear::keyDownYear:: keyPressed=",n)},oo=function(e,o){if("string"===(void 0===ze?"undefined":Ge(ze)).toLowerCase()||ze){var n,t=o.value,i=Ze(t);Xe=!1;var r={},l=Je(genTime);window.__logVal2&&window.console&&window.console.log&&(window.console.log("\n### validationsCCYear::inputYear:: __oldValue=",ze),window.console.log("### validationsCCYear::inputYear:: currentVal=",t),window.console.log("### validationsCCYear::inputYear:: __isValidExpiryYear=",Xe),window.console.log("### validationsCCYear::inputYear:: currentValueStripped=",i));var a=void 0,s=void 0,d=void 0,c=1,u=i;if(window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCYear::inputYear:: typedYear=",u),u&&2===u.length){var p=l.getFullYear();if(a="20"+u,s=Number(a),(d=l.getMonth())>2&&(c=0),window.__logVal2&&window.console&&window.console.log&&(window.console.log("### validationsCCYear::inputYear:: currentYear=",p),window.console.log("### validationsCCYear::inputYear:: entered year=",s),window.console.log("### validationsCCYear::inputYear:: current monthNum=",d),window.console.log("### validationsCCYear::inputYear:: possible valid year=",p-c)),s<p-c)return(r=We(!0,o,"validateExpiryDate: card too old",r)).action=B(qe,"year"),r;if(s>p+15)return(r=We(!0,o,"validateExpiryDate: expiryDate too far in future",r)).action=B(qe,"year"),r}n=u,window.__logVal2&&window.console&&window.console.log&&window.console.log("\n### validationsCCYear::inputYear:: newValue=",n," length=",n.length),r=We(!1,o,"",r),o.value=n,2===n.length&&(Xe=!0);var w=a||"";return Qe(o,w),window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCYear::inputYear:: __setHiddenDateFields year=",w),r.action=B(qe,"year"),r}},no=function(e,o){if(Ke&&b&&9===b)return ccDate.inputYear(e,o);if(b&&8===b){var n=I(e);return"leftarrow"===n||"rightarrow"===n||"shift"===n?null:ccDate.inputYear(e,o)}return null},to=function(){return Xe},io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ro=void 0,lo=!1,ao="",so=!0,co=void 0,uo=function(e,o){if("string"===(void 0===ro?"undefined":io(ro)).toLowerCase()||ro){var n,t=o.value,i=fo(t),r=po(o,i);return window.__logVal2&&window.console&&window.console.log&&(window.console.log("\n### validationsCCSecurityCode::inputCVC:: currentVal=",t),window.console.log("### validationsCCSecurityCode::inputCVC:: __isValidCvcNumber=",so),window.console.log("### validationsCCSecurityCode::inputCVC:: currentValueStripped=",i)),n=i,o.value=n,r}},po=function(e,o){so=!1;var n={},t=void 0;window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCSecurityCode::testCVC:: State.cardBrand=",r.cardBrand);var i=r.cardBrand?r.cardBrand:"",l=i.indexOf(co);switch(i=l>-1?i.substring(0,l):i,window.__logVal2&&window.console&&window.console.log&&window.console.log("### validationsCCSecurityCode::testCVC:: altered cardBrand=",i),i){case null:case"":case"card":t=/^\d{3,4}$/;break;case"amex":t=/^\d{4}$/;break;default:t=/^\d{3}$/}return t.test(o)&&(so=!0),(n=wo(e,"",n)).action=B(ao,"cvc"),n},wo=function(e,o,n){var t=Object.assign({},n);return t.error=o,t},fo=function(e){return e.replace(/[^\d]/g,"")},go={keyDownCVC:function(e,o){ro=o.value;var n=I(e);lo=n===V,ao=n},inputCVC:uo,testCVC:po,keyUpCVCNumberIE:function(e,o){if(lo&&b&&9===b)return uo(0,o);if(b&&8===b){var n=I(e);return"leftarrow"===n||"rightarrow"===n||"shift"===n?null:uo(0,o)}return null},getIsValidCvcNumber:function(){return so},setRecurringCardIndicator:function(e){co=e}},_o=function(e,o,n,t){var i={},a=g(e,r.fieldType,window.genTime,l.dfValue);window._b$dl&&window.console&&window.console.log&&window.console.log("### securedFields_interactions::__makeSecureField:: CLONE data = ",JSON.parse(JSON.stringify(a)));return!0===a.encryptionSuccess?function(){a.action="encryption",a.type=o;var e=o;"month"!==o&&"year"!==o||(e="encryptedExpiry"+function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(o));var n=a[r.fieldType],i=[];return i.push({type:o,encryptedFieldName:e,blob:n}),a[r.fieldType]=i,t&&(a.hasBrandInfo=!0,a.imageSrc=t.imageSrc,a.brand=t.brand,a.cvcText=t.cvcText,a.cvcRequired=t.cvcRequired,a.hideCVC=t.hideCVC),a}():function(){i.encryptionSuccess=!1;var r=!1,l=e.value.length;a.hasOwnProperty("luhn")?(r=0!==l,i.error=r?"luhn check failed":""):a.hasOwnProperty("cvc")?i.error=0===l?"":"cvc check failed":a.hasOwnProperty("date")&&(i.error=0===l?"":"date check failed"),i.action="encryption",a.hasOwnProperty("error")&&(i.error=a.error);var s=a.hasOwnProperty("date");return(a=i).type=o,s&&a.error.length?(a.errorNode=n,window._b$dl&&window.console&&window.console.log&&window.console.log("\n@@@ securedFields_interactions::encryptionError:: CLONE ERROR OBJ=",JSON.parse(JSON.stringify(a))),a):t&&t.brand&&t.brand.length?((a={}).type=o,a.hasBrandInfo=!0,a.imageSrc=t.imageSrc,a.brand=t.brand,a.cvcText=t.cvcText,a.cvcRequired=t.cvcRequired,a.hideCVC=t.hideCVC,a.action="encryption",a):void 0}()},ho=function(e,o){if(window._b$dl&&window.console&&window.console.log&&window.console.log("### securedFields_interactions::handleInvalidField:: pCommObj=",o),e===D.__HOSTED_DATE_FIELD_STR&&(r.storedEncryptedMonthObj=null),e===D.__HOSTED_NUMBER_FIELD_STR){var n=!!r.hasValidNumberField;n&&(r.hasValidNumberField=!1,window._b$dl&&window.console&&window.console.log&&window.console.log("### handleInvalidField::handleInvalidField:: wasValidNumberField"));var t=!!r.numFieldInErrorState;t&&(r.numFieldInErrorState=!1);var i=o.brand!==r.cardBrand;if(!i&&!t&&!n)return;i&&(window._b$dl&&window.console&&window.console.log&&window.console.log("\n@@@ securedFields_interactions::handleInvalidField:: SETTING brand =",o.brand),r.cardBrand=o.brand)}a(o,e)},yo=function(e,o){var n=p(e.parentNode,"#"+D.__EXPIRY_YEAR_STR),t=_o(n,o,e);return t&&t.errorNode&&(r.fieldHasError=!0,T(t.errorNode,r.fieldHasError)),t},vo=function(e){var o=e[D.__HOSTED_DATE_FIELD_STR],n=r.storedEncryptedMonthObj[D.__HOSTED_DATE_FIELD_STR][0];o.unshift(n),a(e,D.__HOSTED_DATE_FIELD_STR)},mo=function(e,o,n){var t=void 0,i=void 0,l=e.id,s=n===D.__HOSTED_NUMBER_FIELD_STR?o:null;switch(n){case D.__HOSTED_NUMBER_FIELD_STR:case D.__HOSTED_CVC_FIELD_STR:case D.__HOSTED_MONTH_FIELD_STR:if(t=_o(e.node,e.id,null,s)){if(t.type===D.__HOSTED_NUMBER_FIELD_STR)if(t.encryptionSuccess)r.hasValidNumberField=!0,r.numFieldInErrorState=!1,t.hasBrandInfo&&(r.cardBrand=t.brand);else if(t.hasBrandInfo)return window._b$dl&&window.console&&window.console.log&&window.console.log("### securedFields_interactions::handleValidField::(line:113):: Failed luhn check contains brand info encryptedObj=",t),ho(l,t);S(e.node,!0),t&&a(t,t.type)}break;case D.__HOSTED_YEAR_FIELD_STR:S(e.node,!0),(i=yo(e.node,D.__HOSTED_YEAR_FIELD_STR))&&a(i,i.type);break;case D.__HOSTED_DATE_FIELD_STR:S(e.node,!0);var d=p(e.node.parentNode,"#"+D.__EXPIRY_MONTH_STR),c=_o(d,"month",e.node);c&&(r.storedEncryptedMonthObj=c),(i=yo(e.node,"year"))&&vo(i)}},Co=function(e,o){if(window._b$dl&&window.console&&window.console.log&&window.console.log("\n@@@ securedFields_interactions::processValidationsObj:: 1 (start of fn) commObj=",e),e.hasOwnProperty("binValue")){var n={action:"binValue",binValue:e.binValue};a(n,o.id)}if(r.fieldHasError=""!==e.error,T(o.node,r.fieldHasError),S(o.node,!1),r.fieldHasError)return window._b$dl&&window.console&&window.console.log&&window.console.log("@@@ securedFields_interactions::processValidationsObj:: 3 (end of fn) errors!! nodeObj.id=",o.id),o.id===D.__HOSTED_NUMBER_FIELD_STR&&(r.numFieldInErrorState=!0),void a(e,o.id);window._b$dl&&window.console&&window.console.log&&window.console.log("@@@ securedFields_interactions::processValidationsObj:: 4 (past errors, checking field validity)");var t=bo(e,o.node,o.id);t?mo(o,e,t):ho(o.id,e)},bo=function(e,o,n){switch(n){case D.__HOSTED_NUMBER_FIELD_STR:if(ce())return n;break;case D.__HOSTED_DATE_FIELD_STR:if(je())return n;break;case D.__HOSTED_CVC_FIELD_STR:if(go.getIsValidCvcNumber())return n;break;case D.__HOSTED_MONTH_FIELD_STR:if(Ue())return n;break;case D.__HOSTED_YEAR_FIELD_STR:if(to())return n}return!1},Oo=function(){function e(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,n,t){return n&&e(o.prototype,n),t&&e(o,t),o}}();var Eo=function(){function e(o){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=o,this.elem=null,this.iosClick=!1,this.iosFocus=!1,this.isActiveIECutEvent=!1}return Oo(e,[{key:"init",value:function(){_(this.elem,"keydown",this.onKeyDown.bind(this),!1),_(this.elem,"input",this.onInput.bind(this),!1),C&&_(this.elem,"keyup",this.keyUpAndroid.bind(this),!1),b&&b<=9&&(_(this.elem,"keyup",this.keyUpIE.bind(this),!1),_(this.elem,"cut",this.cutIE.bind(this),!1),_(document,"selectionchange",this.selectionChangeIE.bind(this),!1)),O&&(_(this.elem,"touchstart",this.touchStart_iOS.bind(this),!1),_(this.elem,"touchend",this.touchEnd_iOS.bind(this),!1),_(this.elem,"mousedown",this.mouseDown_iOS.bind(this),!1),_(this.elem,"mouseup",this.mouseUp_iOS.bind(this),!1),_(this.elem,"click",this.click_iOS.bind(this),!1)),_(this.elem,"focus",this.onFocus.bind(this),!1),_(this.elem,"blur",this.onBlur.bind(this),!1)}},{key:"cutIE",value:function(e,o){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.isActiveIECutEvent=!0;var t=this;setTimeout(function(){var i=o(e,t.elem,n);t.processCommObj(i),t.isActiveIECutEvent=!1},0)}},{key:"selectionChangeIE",value:function(e,o){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this.isActiveIECutEvent){var t=document.activeElement;if(t===this.elem&&""===t.value){window._b$dl&&c("### InputBase::,",this.id,"selectionChangeIE:: EMPTY STRING");var i=o(e,this.elem,n);this.processCommObj(i)}}}},{key:"touchStart_iOS",value:function(e){window.__logIOSEvents&&c("### InputBase::",this.id,"::touchStart_iOS:: "),this.iosClick=!1,this.iosFocus=!1}},{key:"touchEnd_iOS",value:function(e){window.__logIOSEvents&&c("### InputBase::",this.id,"::touchEnd_iOS:: ");var o=this;setTimeout(function(){o.iosClick||(window.__logIOSEvents&&c("### InputBase::",this.id,"::touchEnd_iOS:: forcing click event"),o.mouseUp_iOS(),o.click_iOS(e))},400)}},{key:"mouseDown_iOS",value:function(e){window.__logIOSEvents&&c("### InputBase::",this.id,"::mouseDown_iOS:: "),this.iosFocus=!1}},{key:"mouseUp_iOS",value:function(e){window.__logIOSEvents&&c("### InputBase::",this.id,"::mouseUp_iOS:: "),this.iosFocus?window.__logIOSEvents&&c("### InputBase::",this.id,"::mouseUp_iOS:: focus set - so do nothing"):(window.__logIOSEvents&&c("### InputBase::",this.id,"::mouseUp_iOS:: no focus set - so set focus"),this.onFocus())}},{key:"click_iOS",value:function(e){window.__logIOSEvents&&c("### InputBase::",this.id,'::click_iOS:: send "click" postMessage'),this.iosClick=!0,a({action:"click"},this.id)}},{key:"onFocus",value:function(e){window.__logIOSEvents&&c("### InputBase::",this.id,"::onFocus:: this.elem=",this.elem),this.iosFocus=!0,r.hasFocus=!0,a({action:"focus",focus:!0},this.id)}},{key:"onBlur",value:function(e){window.__logIOSEvents&&c("### InputBase::",this.id,"::onBlur:: this.elem=",this.elem),r.hasFocus=!1,a({action:"focus",focus:!1},this.id)}},{key:"processCommObj",value:function(e){e&&Co(e,{node:this.elem,id:this.id})}}]),e}(),To=function(){function e(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,n,t){return n&&e(o.prototype,n),t&&e(o,t),o}}(),So=function e(o,n,t){null===o&&(o=Function.prototype);var i=Object.getOwnPropertyDescriptor(o,n);if(void 0===i){var r=Object.getPrototypeOf(o);return null===r?void 0:e(r,n,t)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(t):void 0};function Do(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}var Ro=function(e){function o(e){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o);var n=Do(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e)),t=document.getElementById(D.__HOSTED_DATE_FIELD_STR);return t.parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_MONTH_FIELD_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_YEAR_FIELD_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__EXPIRY_MONTH_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__EXPIRY_YEAR_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_CVC_FIELD_STR)).parentNode.removeChild(t),n.elem=document.getElementById(D.__HOSTED_NUMBER_FIELD_STR),n.elem.style.display="block",n.cardGroupTypes=l.cardGroupTypes,n.init(),Do(n,n.elem)}return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}(o,Eo),To(o,[{key:"onKeyDown",value:function(e){re(e,this.elem)}},{key:"onInput",value:function(e){var n=le(e,this.elem,this.cardGroupTypes);So(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,n)}},{key:"keyUpAndroid",value:function(e){se(e,this.elem,this.cardGroupTypes)}},{key:"keyUpIE",value:function(e){var n=ae(e,this.elem,this.cardGroupTypes);So(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,n)}},{key:"cutIE",value:function(e){So(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"cutIE",this).call(this,e,le,this.cardGroupTypes)}},{key:"selectionChangeIE",value:function(e){So(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"selectionChangeIE",this).call(this,e,le,this.cardGroupTypes)}},{key:"onBlur",value:function(e){if(So(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"onBlur",this).call(this,e),this.doLuhnCheck(),this.elem.value.length&&!ce()&&!w(this.elem,"js-chckt-input-field-error")){So(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,{error:"incomplete field",action:"blur"})}}},{key:"doLuhnCheck",value:function(){var e=de(this.elem,this.cardGroupTypes);e&&e.error.length&&So(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,e)}}]),o}(),Io=function(){function e(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,n,t){return n&&e(o.prototype,n),t&&e(o,t),o}}(),No=function e(o,n,t){null===o&&(o=Function.prototype);var i=Object.getOwnPropertyDescriptor(o,n);if(void 0===i){var r=Object.getPrototypeOf(o);return null===r?void 0:e(r,n,t)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(t):void 0};function ko(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}var Vo=function(e){function o(e){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o);var n=ko(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e)),t=document.getElementById(D.__HOSTED_NUMBER_FIELD_STR);return t.parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_CVC_FIELD_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_MONTH_FIELD_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_YEAR_FIELD_STR)).parentNode.removeChild(t),n.elem=document.getElementById(D.__HOSTED_DATE_FIELD_STR),n.elem.style.display="block",n.init(),ko(n,n.elem)}return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}(o,Eo),Io(o,[{key:"onKeyDown",value:function(e){Ie(e,this.elem)}},{key:"onInput",value:function(e){var n=Ne(e,this.elem);No(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,n)}},{key:"keyUpAndroid",value:function(e){Ve(e,this.elem)}},{key:"keyUpIE",value:function(e){var n=ke(e,this.elem);No(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,n)}},{key:"cutIE",value:function(e){No(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"cutIE",this).call(this,e,Ne)}},{key:"selectionChangeIE",value:function(e){No(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"selectionChangeIE",this).call(this,e,Ne)}},{key:"onBlur",value:function(e){if(No(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"onBlur",this).call(this,e),this.elem.value.length&&!je()&&!w(this.elem,"js-chckt-input-field-error")){No(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,{error:"incomplete field",action:"blur"})}}}]),o}(),jo=function(){function e(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,n,t){return n&&e(o.prototype,n),t&&e(o,t),o}}(),Lo=function e(o,n,t){null===o&&(o=Function.prototype);var i=Object.getOwnPropertyDescriptor(o,n);if(void 0===i){var r=Object.getPrototypeOf(o);return null===r?void 0:e(r,n,t)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(t):void 0};function Fo(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}var Po=function(e){function o(e){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o);var n=Fo(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e)),t=document.getElementById(D.__HOSTED_NUMBER_FIELD_STR);return t.parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_DATE_FIELD_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_YEAR_FIELD_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__EXPIRY_MONTH_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__EXPIRY_YEAR_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_CVC_FIELD_STR)).parentNode.removeChild(t),n.elem=document.getElementById(D.__HOSTED_MONTH_FIELD_STR),n.elem.style.display="block",n.init(),Fo(n,n.elem)}return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}(o,Eo),jo(o,[{key:"onKeyDown",value:function(e){He(e,this.elem)}},{key:"onInput",value:function(e){var n=Ye(e,this.elem);Lo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,n)}},{key:"keyUpAndroid",value:function(e){}},{key:"keyUpIE",value:function(e){var n=$e(e,this.elem);Lo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,n)}},{key:"cutIE",value:function(e){Lo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"cutIE",this).call(this,e,Ye)}},{key:"selectionChangeIE",value:function(e){Lo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"selectionChangeIE",this).call(this,e,Ye)}},{key:"onBlur",value:function(e){if(Lo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"onBlur",this).call(this,e),this.elem.value.length&&!Ue()&&!w(this.elem,"js-chckt-input-field-error")){Lo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,{error:"incomplete field",action:"blur"})}}}]),o}(),Mo=function(){function e(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,n,t){return n&&e(o.prototype,n),t&&e(o,t),o}}(),Bo=function e(o,n,t){null===o&&(o=Function.prototype);var i=Object.getOwnPropertyDescriptor(o,n);if(void 0===i){var r=Object.getPrototypeOf(o);return null===r?void 0:e(r,n,t)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(t):void 0};function Ao(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}var xo=function(e){function o(e){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o);var n=Ao(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e)),t=document.getElementById(D.__HOSTED_NUMBER_FIELD_STR);return t.parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_DATE_FIELD_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_MONTH_FIELD_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__EXPIRY_MONTH_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_CVC_FIELD_STR)).parentNode.removeChild(t),n.elem=document.getElementById(D.__HOSTED_YEAR_FIELD_STR),n.elem.style.display="block",n.init(),Ao(n,n.elem)}return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}(o,Eo),Mo(o,[{key:"onKeyDown",value:function(e){eo(e,this.elem)}},{key:"onInput",value:function(e){var n=oo(e,this.elem);Bo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,n)}},{key:"keyUpAndroid",value:function(e){}},{key:"keyUpIE",value:function(e){var n=no(e,this.elem);Bo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,n)}},{key:"cutIE",value:function(e){Bo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"cutIE",this).call(this,e,oo)}},{key:"selectionChangeIE",value:function(e){Bo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"selectionChangeIE",this).call(this,e,oo)}},{key:"onBlur",value:function(e){if(Bo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"onBlur",this).call(this,e),this.elem.value.length&&!to()&&!w(this.elem,"js-chckt-input-field-error")){Bo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,{error:"incomplete field",action:"blur"})}}}]),o}(),Ho=function(){function e(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,n,t){return n&&e(o.prototype,n),t&&e(o,t),o}}(),Yo=function e(o,n,t){null===o&&(o=Function.prototype);var i=Object.getOwnPropertyDescriptor(o,n);if(void 0===i){var r=Object.getPrototypeOf(o);return null===r?void 0:e(r,n,t)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(t):void 0};function $o(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}var Uo=function(e){function o(e){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o);var n=$o(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e)),t=document.getElementById(D.__HOSTED_NUMBER_FIELD_STR);return t.parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_DATE_FIELD_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_MONTH_FIELD_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__HOSTED_YEAR_FIELD_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__EXPIRY_MONTH_STR)).parentNode.removeChild(t),(t=document.getElementById(D.__EXPIRY_YEAR_STR)).parentNode.removeChild(t),n.elem=document.getElementById(D.__HOSTED_CVC_FIELD_STR),n.elem.style.display="block",n.init(),$o(n,n.elem)}return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}(o,Eo),Ho(o,[{key:"onKeyDown",value:function(e){go.keyDownCVC(e,this.elem)}},{key:"onInput",value:function(e){var n=go.inputCVC(e,this.elem);Yo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,n)}},{key:"keyUpAndroid",value:function(e){}},{key:"keyUpIE",value:function(e){var n=go.keyUpCVCNumberIE(e,this.elem);Yo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,n)}},{key:"cutIE",value:function(e){Yo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"cutIE",this).call(this,e,go.inputCVC)}},{key:"selectionChangeIE",value:function(e){Yo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"selectionChangeIE",this).call(this,e,go.inputCVC)}},{key:"onBlur",value:function(e){if(Yo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"onBlur",this).call(this,e),this.elem.value.length&&!go.getIsValidCvcNumber()&&!w(this.elem,"js-chckt-input-field-error")){Yo(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"processCommObj",this).call(this,{error:"incomplete field",action:"blur"})}}}]),o}(),Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ko={background:"background",color:"color",display:"display",font:"font",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontSmoothing:"font-smoothing",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontVariantAlternates:"font-variant-alternates",fontVariantCaps:"font-variant-caps",fontVariantEastAsian:"font-variant-east-asian",fontVariantLigatures:"font-variant-ligatures",fontVariantNumeric:"font-variant-numeric",fontWeight:"font-weight",letterSpacing:"letter-spacing",lineHeight:"line-height",mozOsxFontSmoothing:"moz-osx-font-smoothing",mozTransition:"moz-transition",outline:"outline",opacity:"opacity",textShadow:"text-shadow",transition:"transition",webkitFontSmoothing:"webkit-font-smoothing",webkitTransition:"webkit-transition"},qo={base:".input-field",error:".chckt-input-field--error",validated:".chckt-input-field--validated",placeholder:{0:".input-field::placeholder",1:".input-field::-webkit-input-placeholder",2:".input-field:placeholder-shown"},"::msclear":{0:".input-field::ms-clear"}},Xo=function(e){return e&&!function(e){var o=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/,n=!1;for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];if(i)for(var r in i)if(i.hasOwnProperty(r)){var l=i[r];!0===o.test(l)&&(n=!0)}}return!0===n&&(_b$dl&&window.console&&window.console.log&&window.console.log("@@@ secureFields::__checkForURLS:: URL HAS BEEN FOUND"),!0)}(e)},zo=function(e){return function(o){for(var n=Object.keys(o),t=0;t<n.length;t++){var i=n[t],r=[],l=Object.keys(o[i]),a=[];for(var s in o[i])o[i].hasOwnProperty(s)&&a.push(o[i][s]);for(var d=0;d<l.length;d++){var c=l[d],u=a[d],p=Ko[c];if(p){var w=p+":"+u+";";r.push(w)}else window._b$dl&&window.console&&window.console.log&&window.console.log("@@@ secureFields::__renderStyles:: This style value is not accepted: ",c)}if(qo[i]&&r){var f=r.join("");e(f,qo[i],i)}}}},Jo=function(e){var o=document.createElement("style");return o.setAttribute("data-styling-key",e),o.appendChild(document.createTextNode("")),document.head.appendChild(o),o.sheet},Wo=function(e,o,n){if("object"===(void 0===o?"undefined":Go(o))){for(var t in o)if(o[t]&&e.insertRule)try{e.insertRule(o[t]+" {"+n+"}",0)}catch(e){}}else if(e.insertRule)try{e.insertRule(o+"{"+n+"}",0)}catch(e){}},Qo=zo(function(e,o,n){var t=Jo(n);Wo(t,o,e)}),Zo=zo(function(e,o,n){var t=en(n);t?on(t):t=Jo(n),Wo(t,o,e)}),en=function(e){return p(document,'[data-styling-key="'+e+'"]').sheet},on=function(e){for(var o=e.cssRules.length,n=0;n<o;n++)e.deleteRule(0)},nn=function(e){Xo(e)&&Qo(e)},tn=function(e){Xo(e)&&Zo(e)},rn=void 0,ln=void 0,an=function(e){var o=e+e.substr(0,1);rn=o.substr(0,4),ln=rn.substr(0,3)},sn=function(e,o,n){o===D.__HOSTED_CVC_FIELD_STR&&an(e.placeholder||""),n&&n.hasOwnProperty(o)&&(e.placeholder=n[o],o===D.__HOSTED_CVC_FIELD_STR&&n.hasOwnProperty(D.__HOSTED_CVC_FIELD_STR)&&an(n[o]))},dn=function(e,o){e.placeholder="amex"!==o?ln:rn},cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un=function(e){var o=void 0,n=!1;if(!0===e.sfLogAtStart&&(window._b$dl=!0),e.hasOwnProperty("txVariant")&&e.hasOwnProperty("fieldType")&&e.hasOwnProperty("cardGroupTypes")&&e.hasOwnProperty("sfLogAtStart")&&e.hasOwnProperty("numKey")){switch(e.recurringCardIndicator&&(l.recurringCardIndicator=e.recurringCardIndicator),r.fieldType=e.fieldType,r.txVariant=e.txVariant,r.numKey=e.numKey,l.cardGroupTypes=function(e,o){var n=e,t=o.slice(),i="card"==n,a=i&&1===t.length;if(!i||a){a&&(n=t[0]),t=[n],r.cardBrand=n;var s=n.indexOf(l.recurringCardIndicator);l.nonConsolidatedCard=s>-1?n.substring(0,s):n}return t=t.map(function(e){var o=e.indexOf(l.recurringCardIndicator);return o>-1?e.substring(0,o):e})}(r.txVariant,e.cardGroupTypes),window._b$dl&&(c("### handleConfigMessage::handleConfigMessage:: config.cardGroupTypes=",l.cardGroupTypes),c("### handleConfigMessage::handleConfigMessage:: state.txVariant=",r.txVariant),c("### handleConfigMessage::handleConfigMessage:: csfCommObj.fieldType=",e.fieldType),c("### handleConfigMessage::handleConfigMessage:: csfCommObj.isSingleSF=",e.isSingleSF)),e.fieldType){case"encryptedCardNumber":o=new Ro(e.fieldType);break;case"encryptedExpiryDate":o=new Vo(e.fieldType);break;case"encryptedSecurityCode":o=new Uo(e.fieldType);break;case"encryptedExpiryMonth":o=new Po(e.fieldType);break;case"encryptedExpiryYear":o=new xo(e.fieldType)}if(l.inputEl=o,E||b&&b<=11){var t=p(document,"#shiftTabField");t.setAttribute("tabindex",0),_(t,"focus",function(e){a({action:"shifttab"},r.fieldType)})}var i=[];if(b&&b<=10)for(var s=0;s<16;s++)i.push(4294967296*Math.random()|0);var d=cn(adyen.createEncryption);adyen&&adyen.cse&&adyen.cse.available&&"function"===d&&(n=!0),window._b$dl&&c("### handleConfigMessage::handleConfigMessage:: hasEncryption=",n),n||u("WARNING: securedFields:: the encryption algorithm is not present. It will not be possible to encrypt input fields");if(n){var w=void 0,g=void 0,h=void 0;e.fieldType===D.__HOSTED_DATE_FIELD_STR||e.fieldType===D.__HOSTED_YEAR_FIELD_STR?(h=document.getElementById(D.__EXPIRY_YEAR_STR),w=f(h,i.length?i:null,!0),e.fieldType===D.__HOSTED_DATE_FIELD_STR&&(g=document.getElementById(D.__EXPIRY_MONTH_STR),w=f(g,i.length?i:null,!0))):w=f(o,i.length?i:null,!0),e.fieldType===D.__HOSTED_NUMBER_FIELD_STR&&"function"==typeof w.monitor&&w.monitor("number",o)}nn(e.pmConfig.sfStyles),sn(o,e.fieldType,e.pmConfig.placeholders),e.fieldType===D.__HOSTED_CVC_FIELD_STR&&dn(o,r.txVariant),!0===e.sfLogAtStart&&(window._b$dl=!1),n&&a({action:"config"},e.fieldType)}else window.console&&window.console.error&&window.console.error("ERROR: securedFields:: postMessage config data is incorrect: type 3")},pn=function(e){return e.fireEvent=function(e,o){var n=void 0;try{n=new Event(o)}catch(t){if(!document.createEvent)return void e.fireEvent("on"+o);(n=document.createEvent("Event")).initEvent(o,!1,!1)}e.dispatchEvent(n)},e},wn=function(e){var o=l.inputEl,n={};if(pn(n),e.hasOwnProperty("txVariant")&&e.hasOwnProperty("fieldType")&&e.hasOwnProperty("numKey")&&fn(e)){if(e.focus){if(!i(e.numKey))return;window._b$dl&&c("### handleSpecialMessage::handleSpecialMessage:: FOCUS event pFieldType=",e.fieldType),document.getElementById(e.fieldType).focus()}if(e.click){if(!i(e.numKey))return;!function(e){var o=l.inputEl,n={};if(pn(n),window.__logIOSEvents&&c("\n### handleClickMessage::handleClickMessage:: fieldType=",r.fieldType,"hasFocus=",r.hasFocus,"txVariant=",r.txVariant),r.fieldType===e.fieldType)if(r.hasFocus){var t=o.value,i=N(o);o.value=t,k(o,i),window.__logIOSEvents&&c("### handleClickMessage::handleClickMessage:: Field types match, has focus - RESET VALUE & SET CARET POS caretPos=",i),window.__logIOSEvents&&c("\n")}else window.__logIOSEvents&&c("### handleClickMessage::handleClickMessage:: Field types match BUT DOES'T have focus - DO NOTHING\n");else r.hasFocus?(window.__logIOSEvents&&c("### handleClickMessage::handleClickMessage:: Field types DON'T match, BUT DOES have focus - DO SOMETHING!\n"),n.fireEvent(o,"blur"),r.hasFocus=!1):window.__logIOSEvents&&c("### handleClickMessage::handleClickMessage:: Field types DON'T match, BUT DOESN'T have focus - DO NOTHING\n")}(e)}if(e.styleObject){if(!i(e.numKey))return;tn(e.styleObject)}if(e.hasOwnProperty("shiftPressed")){if(!i(e.numKey))return;r.shiftPressed=e.shiftPressed}if(e.brand){if(!i(e.numKey))return;!function(e,o){if("card"===r.txVariant){o&&(r.hideCVC||(r.hideCVC=!0,document.getElementById(D.__HOSTED_CVC_FIELD_STR).style.display="none")),r.hideCVC&&!1===o&&(r.hideCVC=!1,document.getElementById(D.__HOSTED_CVC_FIELD_STR).style.display="block");var n=null;r.cardBrand=e;var t=document.getElementById(D.__HOSTED_CVC_FIELD_STR);dn(t,e),window._b$dl&&c("### handleBrandMessage::respondToBrandMessage:: state.cardBrand=",r.cardBrand),t&&t.value.length>2&&(n=go.testCVC(t,t.value)),n&&Co(n,{node:t,id:D.__HOSTED_CVC_FIELD_STR})}}(e.brand,e.hideCVC)}if(e.setValue){if(!i(e.numKey))return;o.value=e.setValue,n.fireEvent(o,"paste"),n.fireEvent(o,"input")}if(e.hasOwnProperty("dfValue")){if(!i(e.numKey))return;l.dfValue=e.dfValue}if(e.hasOwnProperty("_b$dl")){if(!i(e.numKey))return;window._b$dl=e._b$dl}}else window.console&&window.console.error&&window.console.error("ERROR: securedFields:: postMessage special data is incorrect: type 4")},fn=function(e){return!!(e.hasOwnProperty("focus")||e.hasOwnProperty("brand")||e.hasOwnProperty("setValue")||e.hasOwnProperty("_b$dl")||e.hasOwnProperty("styleObject")||e.hasOwnProperty("click")||e.hasOwnProperty("shiftPressed")||e.hasOwnProperty("dfValue"))},gn=function(e){if(window._b$dl&&(c("### messageReceiver::postMessageReceiver:: event.origin =",e.origin),c("### messageReceiver::postMessageReceiver:: permitted origin =",origin)),r.eventSource=e.source,r.eventOrigin=e.origin||e.originalEvent.origin,r.eventOrigin===origin)if("string"==typeof e.data){var o=void 0;try{o=JSON.parse(e.data)}catch(e){return void(window.console&&window.console.error&&window.console.error("ERROR: securedFields:: postMessage config data is incorrect: type 2"))}fn(o)?wn(o):un(o)}else window.console&&window.console.error&&window.console.error("ERROR: securedFields:: postMessage config data is incorrect: type 1")},_n=function(){window.origin=window.origin||origin,window.originKey=window.originKey||originKey,window.genTime=window.genTime||genTime,window.checkoutShopperUrl=window.checkoutShopperUrl||checkoutShopperUrl;var e,o=document.location.origin||document.location.protocol+"//"+document.location.host,n=o+document.location.pathname;window.checkoutShopperUrl.indexOf("-live")>-1&&-1===window.origin.indexOf("https")&&window.console&&window.console.error&&window.console.error("ERROR: page asking for SecuredFields is not using https, origin=",window.origin),(e=window.checkoutShopperUrl+"assets/html/"+window.originKey+"/securedFields.2.0.2.html")===n?(window.addEventListener?window.addEventListener("message",gn,!1):window.attachEvent("onmessage",gn),(E||b&&b<=11)&&_(window,"focus",function(e){p(document,"#"+r.fieldType).focus()})):window.console&&window.console.error&&window.console.error("ERROR: sfInit:: Invalid hosting of SecuredFields file.  Document origin: ",o,"Permitted src=",e,"Actual src=",n)};n(2),n(1),_n()},function(e,o){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,o){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),t=1;t<arguments.length;t++){var i=arguments[t];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},writable:!0,configurable:!0})},function(e,o){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,o){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),t=n.length>>>0;if(0===t)return!1;var i=0|o,r=Math.max(i>=0?i:t-Math.abs(i),0);function l(e,o){return e===o||"number"==typeof e&&"number"==typeof o&&isNaN(e)&&isNaN(o)}for(;r<t;){if(l(n[r],e))return!0;r++}return!1}})},function(e,o,n){e.exports=n(0)}]);